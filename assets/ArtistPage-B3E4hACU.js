import{_ as z}from"./Track-CMJ2TDjM.js";import{_ as E}from"./TrackSkeleton-BQMVXjA8.js";import{V as H,m as K,u as Q,A as G,U as J,Q as W,r as $,n as X,q as p,c as f,w as c,a as Y,B as Z,b as ee,o as s,d as e,h as l,x as te,t as g,f as o,_ as d,F as u,R as w,S as se,k as R,i as m,p as j}from"./index-C9eFqA3M.js";import{u as ae,a as le,_ as ie}from"./UserLayout-Cqq_W1dT.js";import{_ as ne}from"./AlbumCard-DK7pvSaZ.js";import{A as oe}from"./AlbumCardSkeleton-DdMKXmQ1.js";import{N as re}from"./navigation-CK6NbNOS.js";import{A as ue,S as ce,a as de}from"./swiper-vue-CP5_gZMq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const me={class:"flex flex-col lg:flex-row gap-4"},fe={class:"flex flex-col min-w-0 flex-shrink flex-1 gap-4"},ge={class:"flex flex-row gap-4"},he={class:"w-48 h-48 flex-shrink-0 overflow-hidden rounded-full"},pe={key:0,class:"w-full h-full bg-main-light-gray dark:bg-main-gray rounded-full animate-pulse"},ve={class:"flex flex-col justify-around w-full"},xe={key:0,class:"h-9 md:h-12 w-64 bg-main-light-gray dark:bg-main-gray rounded animate-pulse"},we={key:1,class:"text-4xl font-bold tracking-tight text-white truncate"},ye={key:2,class:"bg-main-gray animate-pulse h-6 w-32 rounded-full"},_e={key:3,class:"flex flex-row w-fit items-center gap-1 py-1 px-2 bg-main-gray text-main-white text-sm rounded-full"},ke={class:"truncate"},be={class:"flex items-center gap-3"},Se={class:"p-2 flex items-center justify-center hover:scale-110 transition-all"},Ie={class:"flex flex-col w-full gap-2"},Ae={key:2,class:"text-main-white/80 text-lg py-4 text-center"},Ne={class:"flex flex-col w-full gap-2"},Ce={key:0,class:"flex p-2 flex-row w-full overflow-x-hidden gap-4"},Me={key:2,class:"text-main-white/80 text-lg py-4 text-center"},Fe={class:"lg:max-w-80 lg:w-fit lg:min-w-60 space-y-6"},$e={key:0,class:"space-y-2"},Re={key:0,class:"text-base text-pretty text-main-white"},je={key:1,class:"text-base text-main-white/80"},Be={class:"flex flex-col gap-3 w-full"},Le={class:"flex flex-col w-full gap-1 justify-between"},Pe={class:"flex flex-col w-full gap-1 justify-between"},Te=["href","title"],Ue={class:"text-base truncate"},Ve=["href","title"],Je={__name:"ArtistPage",props:{artistId:{type:String,required:!1}},setup(B){const L=B,P=[re,ue],T=Y();Z(),ae();const v=H();K();const x=Q(),U=G(),y=J(),_=W(),V=le(),r=$(!0),i=$({});X(async()=>{r.value=!0;try{i.value=await v.getArtistById(L.artistId)}catch{y.showMessage("Ошибка при загрузке страницы исполнителя.")}finally{r.value=!1}});const D=a=>a===1?"1 слушатель":a>=1e6?`${(a/1e6).toFixed(1)}M слушателей`:a>=1e3?`${(a/1e3).toFixed(1)}K слушателей`:`${a} слушателей`,k=p(()=>i.value.tracks.map(a=>a.id)),h=p(()=>{var a,t;return(t=(a=x==null?void 0:x.currentUserData)==null?void 0:a.likedArtists)==null?void 0:t.includes(i.value.id)}),b=async()=>{h.value?await v.dislikeArtist(i.value.id):await v.likeArtist(i.value.id)},q=async()=>{try{const a=await U.getChatByUser(i.value.id);a?T.push({name:"chat-details",params:{chatId:a.id}}):_.openModal("startMessage",{targetUserId:i.value.id})}catch(a){y.showMessage("Ошибка при проверке чата"),console.log(a)}},O=()=>{_.openModal("report",{type:"user",targetId:i.value.id,targetUserId:i.value.id})},S=()=>{V.playTrackList({trackList:k.value})},I=p(()=>{var a,t;return(t=(a=i.value)==null?void 0:a.tracks)==null?void 0:t.slice(0,5)}),A=p(()=>{var a,t;return(t=(a=i.value)==null?void 0:a.albums)==null?void 0:t.slice(0,5)});return(a,t)=>{const N=ee("RouterLink");return s(),f(ie,null,{default:c(()=>{var C,M,F;return[e("div",me,[e("section",fe,[e("div",ge,[e("div",he,[r.value?(s(),l("div",pe)):(s(),f(te,{key:1,url:(C=i.value)==null?void 0:C.imageURL,class:"w-full h-full shadow-xl",icon:"playlist"},null,8,["url"]))]),e("div",ve,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-white/50"}," Исполнитель ",-1)),r.value?(s(),l("div",xe)):(s(),l("h1",we,g(i.value.displayName),1)),r.value?(s(),l("div",ye)):(s(),l("div",_e,[o(d,{iconName:"PersonIcon",class:"fill-white w-4 h-4"}),e("span",ke,g(D(i.value.listenersCount)),1)])),e("div",be,[r.value?(s(),l(u,{key:0},[t[0]||(t[0]=e("div",{class:"bg-main-gray animate-pulse rounded-full w-10 h-10"},null,-1)),t[1]||(t[1]=e("div",{class:"bg-main-gray animate-pulse rounded-full w-8 h-8"},null,-1)),t[2]||(t[2]=e("div",{class:"bg-main-gray animate-pulse rounded-full w-8 h-8"},null,-1)),t[3]||(t[3]=e("div",{class:"bg-main-gray animate-pulse rounded-full w-8 h-8"},null,-1))],64)):(s(),l(u,{key:1},[e("button",{class:"p-2 flex items-center justify-center bg-main-color hover:bg-blue-600 rounded-full transition-all",title:"Слушать популярное",onClick:S},[o(d,{iconName:"PlayArrowIcon",class:"fill-white w-6 h-6"})]),e("button",{onClick:b,title:"Нравится",class:"p-2 flex items-center justify-center hover:scale-110 transition-all"},[o(d,{iconName:h.value?"FavoriteFillIcon":"FavoriteIcon",class:"fill-white w-6 h-6"},null,8,["iconName"])]),e("button",{onClick:q,title:"Написать сообщение",class:"p-2 flex items-center justify-center hover:scale-110 transition-all"},[o(d,{iconName:"MessageIcon",class:"fill-white w-5 h-5"})]),o(se,null,{trigger:c(()=>[e("button",Se,[o(d,{iconName:"MoreHorizIcon",class:"fill-white w-6 h-6"})])]),content:c(()=>[o(w,{onClick:S,iconName:"PlayArrowIcon",text:"Слушать"}),o(w,{onClick:b,iconName:h.value?"FavoriteFillIcon":"FavoriteIcon",text:h.value?"Нравится":"Не нравится"},null,8,["iconName","text"]),o(w,{onClick:O,iconName:"ReportIcon",isRed:!0,text:"Пожаловаться на профиль"})]),_:1})],64))])])]),e("div",Ie,[o(N,{to:{name:"artist-tracks",params:{artistId:i.value.id}},class:"text-2xl font-semibold hover:text-main-white/80 transition-colors"},{default:c(()=>t[5]||(t[5]=[R(" Популярное ")])),_:1},8,["to"]),r.value?(s(),l(u,{key:0},m(5,n=>o(E,{key:n,isShowImage:!0})),64)):((M=I.value)==null?void 0:M.length)>0?(s(!0),l(u,{key:1},m(I.value,n=>(s(),f(z,{key:n.id,data:n,isShowImage:!0,list:k.value},null,8,["data","list"]))),128)):(s(),l("p",Ae," Треки не найдены. "))]),e("div",Ne,[o(N,{to:{name:"artist-albums",params:{artistId:i.value.id}},class:"text-2xl font-semibold hover:text-main-white/80 transition-colors"},{default:c(()=>t[6]||(t[6]=[R(" Альбомы ")])),_:1},8,["to"]),r.value?(s(),l("div",Ce,[(s(),l(u,null,m(3,n=>o(oe,{key:n})),64))])):((F=A.value)==null?void 0:F.length)>0?(s(),f(j(ce),{key:1,"space-between":32,modules:P,navigation:"","slides-per-view":"auto",class:"w-full"},{default:c(()=>[(s(!0),l(u,null,m(A.value,n=>(s(),f(j(de),{key:n.id,class:"!w-fit"},{default:c(()=>[o(ne,{album:n},null,8,["album"])]),_:2},1024))),128))]),_:1})):(s(),l("p",Me," Альбомы не найдены. "))])]),e("section",Fe,[e("div",null,[t[8]||(t[8]=e("h2",{class:"text-xl font-bold mb-3"},"Об исполнителе",-1)),r.value?(s(),l("div",$e,t[7]||(t[7]=[e("div",{class:"h-5 w-full bg-main-light-gray dark:bg-main-gray rounded animate-pulse"},null,-1),e("div",{class:"h-5 w-3/4 bg-main-light-gray dark:bg-main-gray rounded animate-pulse"},null,-1),e("div",{class:"h-5 w-5/6 bg-main-light-gray dark:bg-main-gray rounded animate-pulse"},null,-1)]))):(s(),l(u,{key:1},[i.value.description?(s(),l("p",Re,g(i.value.description),1)):(s(),l("p",je," Описание отсутствует. "))],64))]),e("div",null,[t[10]||(t[10]=e("h2",{class:"text-xl font-bold mb-3"},"Ссылки",-1)),e("div",Be,[r.value?(s(),l(u,{key:0},m(4,n=>e("div",Le,t[9]||(t[9]=[e("div",{class:"h-5 w-1/2 bg-main-gray rounded animate-pulse"},null,-1),e("div",{class:"h-5 w-full bg-main-gray rounded animate-pulse"},null,-1)]))),64)):(s(!0),l(u,{key:1},m(i.value.socialLinks,n=>(s(),l("div",Pe,[e("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",title:n.name,class:"hover:text-white transition h-5 flex flex-row w-fit items-center gap-1"},[e("span",Ue,g(n.name),1),o(d,{iconName:"ArrowOutIcon",class:"fill-current w-5 h-5"})],8,Te),e("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",title:n.name,class:"h-5 w-full text-main-white/50 truncate hover:text-main-white hover:underline transition"},g(n.url),9,Ve)]))),256))])])])])]}),_:1})}}};export{Je as default};
