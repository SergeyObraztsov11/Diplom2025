import{u as k,r as l,c as N,a as V,b as j,o as n,w as p,d as t,e as S,f as c,_ as m,g as h,v as x,h as i,F as A,i as B,t as F,j as I,k as L}from"./index-C5SE_L3X.js";import{_ as U}from"./AuthLayout-DwRuy5Qe.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppFooter-D7ZgsriB.js";const C={class:"flex-1 flex items-center justify-center"},E={class:"flex flex-row h-12 w-full items-center gap-2 p-2 border-2 border-main-gray text-main-gray rounded-full transition-colors focus-within:border-main-white focus-within:bg-main-gray focus-within:text-main-white"},P={class:"flex flex-row h-12 w-full items-center gap-2 p-2 border-2 border-main-gray text-main-gray rounded-full transition-colors focus-within:border-main-white focus-within:bg-main-gray focus-within:text-main-white"},R={key:0,class:"p-2 text-main-error-red list-disc list-inside"},T={class:"flex flex-col md:flex-row gap-2 justify-between"},D={class:"text-lg p-2"},M={key:0,type:"submit",class:"flex flex-row items-center justify-center gap-2 bg-main-gray px-4 py-2 rounded-lg text-lg hover:scale-105",title:"Войти"},$={key:1,class:"flex flex-row items-center justify-center gap-2 bg-main-gray px-4 py-2 rounded-lg text-lg"},K={__name:"AuthPage",setup(z){const g=k(),w=V(),o=l(""),u=l(""),d=l(!1);l(null);const r=l([]),f=l(!1),v=a=>{switch(a){case"auth/user-not-found":return"Пользователь не найден";case"auth/wrong-password":return"Неверный пароль";case"auth/email-already-in-use":return"Почта уже используется";case"auth/invalid-email":return"Некорректный email";case"auth/invalid-credential":return"Неверный email или пароль";case"auth/too-many-requests":return"Слишком много попыток входа. Попробуйте позже.";default:return"Неизвестная ошибка: "+a}},y=()=>{const a=[];return o.value.includes("@")||a.push("Некорректный email"),u.value.length<6&&a.push("Минимум 6 символов в пароле"),a},_=async()=>{if(f.value=!0,r.value=y(),!(r.value.length>0))try{d.value=!0,await g.loginUser(o.value,u.value),w.push("/")}catch(a){r.value=[v(a)]}finally{d.value=!1}};return(a,e)=>{const b=j("RouterLink");return n(),N(U,null,{default:p(()=>[t("div",C,[t("form",{onSubmit:S(_,["prevent"]),class:"flex flex-col max-w-xl bg-main-black rounded-lg p-6 gap-4"},[e[6]||(e[6]=t("h1",{class:"text-nowrap text-5xl font-semibold mb-4 text-center"}," Вход ",-1)),t("div",E,[c(m,{iconName:"EmailIcon",class:"fill-current h-6 w-6"}),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),type:"email",id:"email",autocomplete:"off",required:"",spellcheck:"false",placeholder:"example@mail.ru",class:"w-full h-full outline-none bg-transparent text-main-white placeholder:text-main-white/50"},null,512),[[x,o.value,void 0,{trim:!0}]])]),t("div",P,[c(m,{iconName:"KeyIcon",class:"fill-current h-6 w-6"}),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),type:"password",id:"password",autocomplete:"off",required:"",spellcheck:"false",placeholder:"Пароль",class:"w-full h-full outline-none bg-transparent text-main-white placeholder:text-main-white/50"},null,512),[[x,u.value]])]),f.value&&r.value.length?(n(),i("ul",R,[(n(!0),i(A,null,B(r.value,s=>(n(),i("li",{key:s},F(s),1))),128))])):I("",!0),t("div",T,[t("div",D,[e[3]||(e[3]=t("span",{class:"inline"},"Нет аккаунта? ",-1)),c(b,{class:"inline underline hover:text-white",to:{name:"registration"}},{default:p(()=>e[2]||(e[2]=[L("Регистрация")])),_:1})]),d.value?(n(),i("div",$,[c(m,{iconName:"ProgressActivityIcon",class:"fill-current"}),e[5]||(e[5]=t("span",null,"Загрузка",-1))])):(n(),i("button",M,e[4]||(e[4]=[t("span",null,"Войти",-1)])))])],32)])]),_:1})}}},Q=q(K,[["__scopeId","data-v-a5396193"]]);export{Q as default};
